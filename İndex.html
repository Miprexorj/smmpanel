<!-- index.html -->
<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>miprexsmm Giriş</title>
<style>
/* CSS burada inline olabilir */
</style>
</head>
<body>

<div class="login-box">
  <h2>miprexsmm</h2>
  <input id="username" placeholder="Kullanıcı Adı">
  <input id="password" type="password" placeholder="Şifre">
  <button onclick="login()">Giriş Yap</button>
  <div id="error"></div>
</div>

<!-- Buraya yapıştır -->
<script>
async function login(){
  const username = document.getElementById("username").value;
  const password = document.getElementById("password").value;

  try {
    const res = await fetch("/login", {
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body: JSON.stringify({username,password})
    });
    const data = await res.json();
    if(data.success){
      if(data.role==="admin") window.location.href="admin.html";
      else window.location.href="dashboard.html";
    } else {
      document.getElementById("error").innerText="Kullanıcı adı veya şifre yanlış!";
    }
  } catch(err){
    console.error(err);
    document.getElementById("error").innerText="Sunucu hatası!";
  }
}
</script>

</body>
</html>
